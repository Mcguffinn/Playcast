"""
    pygments.lexers.spice
    ~~~~~~~~~~~~~~~~~~~~~

    Lexers for the Spice programming language.

<<<<<<< HEAD
    :copyright: Copyright 2006-2022 by the Pygments team, see AUTHORS.
=======
    :copyright: Copyright 2006-2021 by the Pygments team, see AUTHORS.
>>>>>>> 278bc2c6ba4d6956c2789ca2fb03497897becfc1
    :license: BSD, see LICENSE for details.
"""

import re

from pygments.lexer import RegexLexer, bygroups, words
from pygments.token import Text, Comment, Operator, Keyword, Name, String, \
    Number, Punctuation, Whitespace

__all__ = ['SpiceLexer']


class SpiceLexer(RegexLexer):
    """
<<<<<<< HEAD
    For Spice source.
=======
    For `Spice <http://spicelang.com>`_ source.
>>>>>>> 278bc2c6ba4d6956c2789ca2fb03497897becfc1

    .. versionadded:: 2.11
    """
    name = 'Spice'
<<<<<<< HEAD
    url = 'https://www.spicelang.com'
=======
>>>>>>> 278bc2c6ba4d6956c2789ca2fb03497897becfc1
    filenames = ['*.spice']
    aliases = ['spice', 'spicelang']
    mimetypes = ['text/x-spice']

<<<<<<< HEAD
=======
    flags = re.MULTILINE | re.UNICODE

>>>>>>> 278bc2c6ba4d6956c2789ca2fb03497897becfc1
    tokens = {
        'root': [
            (r'\n', Whitespace),
            (r'\s+', Whitespace),
<<<<<<< HEAD
            (r'\\\n', Text),
            # comments
            (r'//(.*?)\n', Comment.Single),
            (r'/(\\\n)?[*]{2}(.|\n)*?[*](\\\n)?/', String.Doc),
            (r'/(\\\n)?[*](.|\n)*?[*](\\\n)?/', Comment.Multiline),
            # keywords
            (r'(import|as)\b', Keyword.Namespace),
            (r'(f|p|type|struct)\b', Keyword.Declaration),
            (words(('if', 'else', 'for', 'foreach', 'while', 'break', 'continue', 'return', 'assert', 'thread', 'unsafe', 'ext', 'dll'), suffix=r'\b'), Keyword),
            (words(('const', 'signed', 'unsigned', 'inline', 'public'), suffix=r'\b'), Keyword.Pseudo),
            (words(('new', 'switch', 'case', 'yield', 'stash', 'pick', 'sync'), suffix=r'\b'), Keyword.Reserved),
            (r'(true|false|nil)\b', Keyword.Constant),
            (words(('double', 'int', 'short', 'long', 'byte', 'char', 'string', 'bool', 'dyn'), suffix=r'\b'), Keyword.Type),
            (words(('printf', 'sizeof', 'len', 'tid', 'join'), suffix=r'\b(\()'), bygroups(Name.Builtin, Punctuation)),
            # numeric literals
            (r'([0-9]*[.][0-9]+)', Number.Double),
            (r'((0[dD])?[0-9]+[sl]?)', Number.Integer),
            (r'(0[bB][01]+[sl]?)', Number.Bin),
            (r'(0[oO][0-7]+[sl]?)', Number.Oct),
            (r'(0[xXhH][0-9a-fA-F]+[sl]?)', Number.Hex),
            # string literal
            (r'"(\\\\|\\[^\\]|[^"\\])*"', String),
            # char literal
            (r'\'(\\\\|\\[^\\]|[^\'\\])\'', String.Char),
            # tokens
            (r'(<<=|>>=|<<|>>|<=|>=|\+=|-=|\*=|/=|\%=|\|=|&=|\^=|&&|\|\||&|\||\+\+|--|\%|\^|\~|==|!=|[.]{3}|[+\-*/&])', Operator),
            (r'[|<>=!()\[\]{}.,;:\?]', Punctuation),
            # identifiers
=======
            (r'\\\n', Text),  # line continuations
            (r'//(.*?)\n', Comment.Single),
            (r'/(\\\n)?[*](.|\n)*?[*](\\\n)?/', Comment.Multiline),
            (r'(import|as)\b', Keyword.Namespace),
            (r'(f|p|type|struct|const)\b', Keyword.Declaration),
            (words(('if', 'else', 'for', 'foreach', 'while', 'break', 'continue', 'return', 'new', 'ext'), suffix=r'\b'), Keyword),
            (r'(true|false)\b', Keyword.Constant),
            (words(('printf', 'sizeof'), suffix=r'\b(\()'), bygroups(Name.Builtin, Punctuation)),
            (words(('double', 'int', 'short', 'long', 'byte', 'char', 'string', 'bool', 'dyn'), suffix=r'\b'), Keyword.Type),
            # double_lit
            (r'\d+(\.\d+[eE][+\-]?\d+|\.\d*|[eE][+\-]?\d+)', Number.Double),
            (r'\.\d+([eE][+\-]?\d+)?', Number.Double),
            # int_lit
            (r'(0|[1-9][0-9]*)', Number.Integer),
            # StringLiteral
            # -- interpreted_string_lit
            (r'"(\\\\|\\[^\\]|[^"\\])*"', String),
            # Tokens
            (r'(<<=|>>=|<<|>>|<=|>=|\+=|-=|\*=|/=|&&|\|\||&|\||\+\+|--|\%|==|!=|[.]{3}|[+\-*/&])', Operator),
            (r'[|<>=!()\[\]{}.,;:\?]', Punctuation),
            # identifier
>>>>>>> 278bc2c6ba4d6956c2789ca2fb03497897becfc1
            (r'[^\W\d]\w*', Name.Other),
        ]
    }
